#!/bin/bash
echo "Welcome to the PenTester's Software Installer" 1>&2
echo "This will install all softwares for penetration testing and Ethical hacking" 1>&2
echo "------------------------------------------------------------------------------" 1>&2
echo "Made By: Abhiram B.S.N." 1>&2
echo "Date: 1st May 2021" 1>&2
echo "------------------------------------------------------------------------------" 1>&2
echo "Press any key to continue..."
read key
export local_user=$USER
echo "Changing to temporary directory..."
cd /tmp

# Install necessary dependencies
echo "Installing pre-requisite softwares"
sudo apt install -y git curl python3-pip python3-dev python3-virtualenv python3-venv p7zip-full p7zip-rar gcc build-essential g++ make automake autoconf libssl-dev nvidia-opencl-dev zlib1g-dev libkrb5-dev libgmp-dev
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Add HTTPS Support
echo "Adding HTTPS Support for apt..." 1>&2
sudo apt install -y apt-transport-https
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Alien for rpm to deb conversion
echo "Installing Alien for RPM to DEB conversion (for Nmap)..."
sudo apt install -y alien
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Nmap, Ncat and Nping
echo "Downloading Latest Nmap, Ncat, Nping RPMs..."
wget "https://nmap.org/dist/nmap-7.91-1.x86_64.rpm"
wget "https://nmap.org/dist/ncat-7.91-1.x86_64.rpm"
wget "https://nmap.org/dist/nping-0.7.91-1.x86_64.rpm"

echo "Converting RPMs to DEB"
sudo alien *.rpm

echo "Installing the converted DEBs"
sudo dpkg -i *.deb

echo "Nmap Installation Complete"
echo "----------------------------------------------------------------------------------"

# Install Gobuster
echo "Installing Gobuster..."
wget "https://github.com/OJ/gobuster/releases/download/v3.1.0/gobuster-linux-amd64.7z"
sudo mkdir /opt/pentest
7z x gobuster*
sudo mv gobuster* /opt/pentest/
sudo ln -s /opt/pentest/gobuster*/gobuster /usr/local/bin
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Seclists
echo "Installing Wordlists"
sudo git clone "https://github.com/danielmiessler/SecLists.git" /usr/share/seclists
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Payload All the Things
echo "Installing Payload All the Things..."
sudo git clone "https://github.com/swisskyrepo/PayloadsAllTheThings.git" /opt/pentest/PayloadsAllTheThings
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Privilege Escalation Awesome Suite
echo "Installing Privilege Escalation Awesome Suite..."
sudo git clone "https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite.git" /opt/pentest/peas
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Exploit-DB
echo "Installing Exploit DB..."
sudo git clone "https://github.com/offensive-security/exploitdb.git" /opt/pentest/exploitdb
sudo ln -s /opt/pentest/exploitdb/searchsploit /usr/local/bin
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Metasploit Framework
echo "Installing Metasploit Framework..."
curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall
chmod 755 msfinstall
./msfinstall
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Wireshark & Tshark
echo "Installing Wireshark and Tshark..."
sudo apt install -y wireshark tshark
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Evil-WinRM
echo "Installing Evil WinRM..."
sudo apt install -y ruby ruby-dev
sudo gem install evil-winrm
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install PS-Empire
echo "Installing PS-Empire..."
sudo pip3 install poetry
git clone --recursive https://github.com/BC-SECURITY/Empire.git /opt/pentest/Empire
cd /opt/pentest/Empire
sudo ./setup/install.sh
sudo poetry install
echo "Run the following command to use Empire: sudo poetry run python empire"
echo "Done..."
cd /tmp
echo "----------------------------------------------------------------------------------"

# Installing Starkiller GUI
echo "Installing Appimage Launcher..."
wget "https://github.com/TheAssassin/AppImageLauncher/releases/download/v2.2.0/appimagelauncher_2.2.0-travis995.0f91801.bionic_amd64.deb"
sudo dpkg -i appimage*
echo "Installing Starkiller GUI..."
wget "https://github.com/BC-SECURITY/Starkiller/releases/download/v1.7.0/starkiller-1.7.0.AppImage"
chmod +x starkiller*
cp starkiller* /home/$local_user
chown $local_user:$local_user /home/$local_user/starkiller*
# echo "Copy the starkiller file from the temp directory to the home directory and execute it"
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Java JDK and JRE
echo "Installing Java JDK and JRE..."
sudo apt install -y openjdk-15-jre-headless openjdk-15-jdk-headless openjdk-15-jdk
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Burpsuite
echo "Installing Burpsuite..."
echo "Download Burpsuite from this website https://portswigger.net/burp/releases/community/latest, copy the file to /tmp directory and press [Enter] to continue..."
read key
chmod +x /tmp/burp*.sh
sudo /tmp/burp*.sh
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install OWASP ZAP
echo "Installing OWASP ZAP..."
wget "https://github.com/zaproxy/zaproxy/releases/download/v2.10.0/ZAP_2_10_0_unix.sh"
chmod +x ./ZAP*.sh
sudo ./ZAP*.sh
echo "----------------------------------------------------------------------------------"
echo "Done..."

# Install John The Ripper
echo "Installing John The Ripper..."
git clone https://github.com/openwall/john -b bleeding-jumbo john
cd ./john/src
./configure && make -s clean && make -sj4


# Install Other Software
echo "Installing Other required Software..."
sudo apt install -y steghide hashcat
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Sublime Text
echo "Installing Sublime Text..."
wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
sudo apt-get update
sudo apt-get install sublime-text
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Powershell
echo "Installing Powershell..."
sudo snap install powershell --classic
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install VSCode
echo "Installing Visual Studio Code..."
sudo snap install code --classic
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Entertainment & Multimedia
# Install Spotify
echo "Installing Spotify..."
sudo snap install spotify
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install VLC
echo "Installing VLC Media Player..."
sudo apt install -y vlc
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Elisa Player
echo "Installing Elisa Music Player..."
sudo apt install -y elisa
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Shell Customizations
# ZSH
echo "Installing ZSH..."
sudo apt install -y zsh
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Oh-my-ZSH
echo "Installing Oh-my-zsh manager..."
sh "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Plugins
echo "Installing Plugins for Oh-my-zsh..."

# ZSH Syntax highlighting and autosuggestions
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

curl https://pastebin.com/raw/fRphLvGe -o .zshrc
echo "Run source ~/.zshrc"
echo "---------------------------------------------------------------------------------"


# Install Impacket
echo "Installing Impacket..."
virtualenv ~/impacket-env
source ~/impacket-env/bin/activate
sudo git clone https://github.com/SecureAuthCorp/impacket.git /opt/pentest/impacket
cd /opt/pentest/impacket
python3 -m pip install .
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Change to temp dir
cd /tmp

# Install docker
echo "Installing Docker..."
sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d docker.list > /dev/null
sudo usermod -aG $local_user docker
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Installing Virtualbox
echo "deb [arch=amd64] https://download.virtualbox.org/virtualbox/debian eoan contrib" | sudo tee /etc/apt/sources.list.d/virtualbox.list > /dev/null
wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
sudo apt update
sudo apt install -y virtualbox-6.1
echo "Downloading Virtualbox Ext Pack to your user's Downloads directory and execute it manually..."
wget "https://download.virtualbox.org/virtualbox/6.1.22/Oracle_VM_VirtualBox_Extension_Pack-6.1.22.vbox-extpack"
cp Oracle_VM_VirtualBox_Extension_Pack* /home/$local_user/Downloads
chown $local_user:$local_user /home/$local_user/Downloads/Oracle_VM_VirtualBox_Extension_Pack*
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Install Remmina RDP Client
echo "Installing Remmina..."
sudo apt install -y remmina
echo "Done..."
echo "----------------------------------------------------------------------------------"

# Clean Up
echo "Installation Done Successfully..."
echo "Press [ENTER] to proceed with cleanup..."
read key
rm -r /tmp/*
